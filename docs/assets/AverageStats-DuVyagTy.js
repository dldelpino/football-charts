import{Q as P,a as T}from"./QTable-BfTvi9B-.js";import{_ as D,S as L,P as $}from"./SelectLeague-7_ncoknL.js";import{r as g,N as V,G as y,L as p,K as v,F as k,S as F,H as M,T as B,P as C,O as Q,M as W}from"./index-C6mlnINT.js";import"./QBtn-1lZu7ACE.js";import"./format-CSC_wmZ4.js";import"./QList-Dm5VRfP4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const E={class:"buttons-container"},H={class:"buttons-container",style:{"padding-bottom":"30px"}},K=["src"],Y={__name:"AverageStats",setup(O){const s=g(null),n=g([]);let d;const m=g([]),r=g([]);function G(){s.value=="Serie A"||s.value=="Ligue 1"?d=g([{name:"sp",field:"sp",label:"SP",sortable:!0},{name:"avg_position",field:"avg_position",label:"Avg #",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 180px"},{name:"avg_ppm",field:"avg_ppm",label:"Avg PPM",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"avg_points",field:"avg_points",label:"Avg Points",sortable:!0,style:"width: 70px"},{name:"avg_w",field:"avg_w",label:"Avg W",sortable:!0,style:"width: 70px"},{name:"avg_d",field:"avg_d",label:"Avg D",sortable:!0,style:"width: 70px"},{name:"avg_l",field:"avg_l",label:"Avg L",sortable:!0,style:"width: 70px"},{name:"avg_gf",field:"avg_gf",label:"Avg GF",sortable:!0,style:"width: 70px"},{name:"avg_ga",field:"avg_ga",label:"Avg GA",sortable:!0,style:"width: 70px"},{name:"avg_gd",field:"avg_gd",label:"Avg GD",sortable:!0,style:"width: 70px"},{name:"avg_top_scorer_goals",field:"avg_top_scorer_goals",label:"Avg Top Scorer Goals",sortable:!0}]):d=g([{name:"sp",field:"sp",label:"SP",sortable:!0},{name:"avg_position",field:"avg_position",label:"Avg #",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 180px"},{name:"avg_points",field:"avg_points",label:"Avg Points",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"avg_w",field:"avg_w",label:"Avg W",sortable:!0,style:"width: 70px"},{name:"avg_d",field:"avg_d",label:"Avg D",sortable:!0,style:"width: 70px"},{name:"avg_l",field:"avg_l",label:"Avg L",sortable:!0,style:"width: 70px"},{name:"avg_gf",field:"avg_gf",label:"Avg GF",sortable:!0,style:"width: 70px"},{name:"avg_ga",field:"avg_ga",label:"Avg GA",sortable:!0,style:"width: 70px"},{name:"avg_gd",field:"avg_gd",label:"Avg GD",sortable:!0,style:"width: 70px"},{name:"avg_top_scorer_goals",field:"avg_top_scorer_goals",label:"Avg Top Scorer Goals",sortable:!0}]),r.value=[],fetch(`data/${s.value.toLowerCase().replace(/\s+/g,"_")}.csv`).then(u=>u.text()).then(u=>{$.parse(u,{header:!0,complete:i=>{m.value=i.data.map(a=>({season:a.Season,position:Number(a["#"]),team:a.Team,points:Number(a.Points),mp:a.MP,w:Number(a.W),d:Number(a.D),l:Number(a.L),gf:Number(a.GF),ga:Number(a.GA),gd:Number(a.GD),top_scorer:a["Top Scorer"],top_scorer_goals:Number(a["Top Scorer Goals"]),logo:`icons/teams/${s.value}/${a.Team}.png`})),m.value.forEach(a=>{if(!r.value.some(o=>o.team==a.team)){const o=m.value.filter(e=>e.team==a.team),l=o.length,_=o.map(e=>e.position).reduce((e,t)=>e+t,0),c=o.map(e=>e.points).reduce((e,t)=>e+t,0),b=o.map(e=>e.w).reduce((e,t)=>e+t,0),f=o.map(e=>e.d).reduce((e,t)=>e+t,0),h=o.map(e=>e.l).reduce((e,t)=>e+t,0),S=o.map(e=>e.gf).reduce((e,t)=>e+t,0),w=o.map(e=>e.ga).reduce((e,t)=>e+t,0),A=o.map(e=>e.gd).reduce((e,t)=>e+t,0),x=o.map(e=>e.top_scorer_goals).reduce((e,t)=>e+t,0);if(s.value=="Serie A"||s.value=="Ligue 1"){const e=o.map(t=>t.points/t.mp).reduce((t,N)=>t+N,0);r.value.push({sp:l,avg_position:Math.round(_/l*1e3)/1e3,team:a.team,avg_ppm:Math.round(e/l*1e3)/1e3,avg_points:Math.round(c/l*1e3)/1e3,avg_w:Math.round(b/l*1e3)/1e3,avg_d:Math.round(f/l*1e3)/1e3,avg_l:Math.round(h/l*1e3)/1e3,avg_gf:Math.round(S/l*1e3)/1e3,avg_ga:Math.round(w/l*1e3)/1e3,avg_gd:Math.round(A/l*1e3)/1e3,avg_top_scorer_goals:Math.round(x/l*1e3)/1e3,logo:`icons/teams/${s.value}/${a.team}.png`})}else r.value.push({sp:l,avg_position:Math.round(_/l*1e3)/1e3,team:a.team,avg_points:Math.round(c/l*1e3)/1e3,avg_w:Math.round(b/l*1e3)/1e3,avg_d:Math.round(f/l*1e3)/1e3,avg_l:Math.round(h/l*1e3)/1e3,avg_gf:Math.round(S/l*1e3)/1e3,avg_ga:Math.round(w/l*1e3)/1e3,avg_gd:Math.round(A/l*1e3)/1e3,avg_top_scorer_goals:Math.round(x/l*1e3)/1e3,logo:`icons/teams/${s.value}/${a.team}.png`})}}),s.value=="Serie A"||s.value=="Ligue 1"?n.value=r.value.sort((a,o)=>o.avg_ppm-a.avg_ppm):n.value=r.value.sort((a,o)=>o.avg_points-a.avg_points)}})})}return(u,i)=>(y(),V(C,null,[p("div",E,[v(D,{modelValue:s.value,"onUpdate:modelValue":i[0]||(i[0]=a=>s.value=a)},null,8,["modelValue"]),v(L,{onClick:G})]),p("div",H,[n.value.length?(y(),k(P,{key:0,class:"stats-table",flat:"",bordered:"",rows:n.value,columns:B(d),"virtual-scroll":"","hide-bottom":"","rows-per-page-options":[0]},{"body-cell-team":M(a=>[v(T,{props:a,style:{"align-items":"center"},class:"row"},{default:M(()=>[p("img",{src:a.row.logo,style:{width:"16px","margin-right":"8px"}},null,8,K),Q(" "+W(a.row.team),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])):F("",!0)])],64))}};export{Y as default};
