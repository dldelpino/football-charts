import{Q as L}from"./QBtn-24x0fXpJ.js";import{Q as S}from"./QInput-DaF0LYQZ.js";import{h as I}from"./highcharts-vue.min-BOwdDHL7.js";import{_ as O,S as P,L as F,a as z,b as N}from"./ShowResults-NuKt9TTz.js";import{u as o,w as g,N as Q,G as b,L as y,K as n,H as E,F as M,S as k,R as j,T as q,O as D}from"./index-k_HJJlfR.js";import"./format-y4IBnE62.js";const G={class:"buttons-container"},H={class:"data-container"},K={style:{width:"90%"}},Z={__name:"PositionFrequency",setup(R){const a=o(null),e=o(null),i=o(null);let m=null,p=null;const V=()=>{e.value--,p=setTimeout(()=>{m=setInterval(()=>e.value--,50)},250)},C=()=>{e.value++,p=setTimeout(()=>{m=setInterval(()=>e.value++,50)},250)},c=()=>{clearInterval(m),clearTimeout(p)},_=o(0),w=o({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),d=o(!1),v=o(!1),$={LaLiga:"Spain",LaLiga2:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},T=async()=>{if(!a.value||!e.value)return;d.value=!0;const s=setTimeout(()=>{v.value=!0},1e4),l=(await N.get("https://football-charts-backend.onrender.com/position-frequency",{params:{league_name:a.value,position:e.value}})).data,B=Object.entries(l).sort((t,h)=>h[1]-t[1]).map(([t,h])=>({name:t,y:h}));let r;e.value==1?r="st":e.value==2?r="nd":e.value==3?r="rd":r="th";const f=Object.keys(l).length,x=[];for(let t=1;t<=f;t++)x.push(`hsl(120, ${Math.floor(t/(f+1)*100)}%, ${Math.floor(t/(f+1)*100)}%)`);clearTimeout(s),d.value=!1,v.value=!1,_.value++,w.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"pie",height:500},colors:x,plotOptions:{pie:{dataLabels:{enabled:!0,useHTML:!0,style:{fontFamily:"Inter"},formatter:function(){return`<div class="row no-wrap items-center" style="font-size: 11px"><img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${$[a.value]}/${this.point.name}.png" style="width: 16px; margin-right: 6px">${this.point.name} (${this.point.y}) &#8203 &#8203 &#8203 &#8203 &#8203</div>`}}}},series:[{name:`Times finished ${e.value}${r}`,data:B}],credits:{enabled:!1}}};return g(a,()=>{e.value=null}),g(a,s=>{s=="Bundesliga"?i.value=18:s=="LaLiga2"?i.value=22:i.value=20}),g(e,s=>{s>i.value?e.value=i.value:e.value!=null&&e.value<1&&(e.value=1)}),(s,u)=>(b(),Q(D,null,[y("div",G,[n(O,{modelValue:a.value,"onUpdate:modelValue":u[0]||(u[0]=l=>a.value=l)},null,8,["modelValue"]),n(S,{modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=l=>e.value=l),modelModifiers:{number:!0},disable:!a.value,outlined:"",rounded:"","bg-color":"white",dense:"",color:"secondary",style:{width:"110px"},label:"Pos."},{append:E(()=>[n(L,{round:"",dense:"",flat:"",icon:"remove",size:"10px",onMousedown:V,onMouseup:c,onMouseleave:c}),n(L,{round:"",dense:"",flat:"",icon:"add",size:"10px",onMousedown:C,onMouseup:c,onMouseleave:c})]),_:1},8,["modelValue","disable"]),n(P,{onClick:T})]),y("div",H,[d.value?(b(),M(z,{key:0})):k("",!0),n(F,{class:j({visible:v.value})},null,8,["class"]),y("div",K,[d.value?k("",!0):(b(),M(q(I.Chart),{key:_.value,options:w.value},null,8,["options"]))])])],64))}};export{Z as default};
