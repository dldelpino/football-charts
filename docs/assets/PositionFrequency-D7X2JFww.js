import{Q as M}from"./QBtn-DQuxYT4V.js";import{Q as I}from"./QInput-D__TMEjx.js";import{h as O}from"./highcharts-vue.min-BG69pZ2G.js";import{_ as P,S,L as F,a as z,b as N}from"./ShowResults-Ar0N-iln.js";import{u as s,w as g,N as Q,G as b,L as y,K as n,H as E,F as k,S as L,R as j,T as q,O as D}from"./index-Cb092ib2.js";import"./format-Cvr18dTT.js";const G={class:"buttons-container"},H={class:"data-container"},K={style:{width:"90%"}},Z={__name:"PositionFrequency",setup(R){const a=s(null),e=s(null),r=s(null);let m=null,p=null;const V=()=>{e.value--,p=setTimeout(()=>{m=setInterval(()=>e.value--,50)},250)},C=()=>{e.value++,p=setTimeout(()=>{m=setInterval(()=>e.value++,50)},250)},c=()=>{clearInterval(m),clearTimeout(p)},_=s(0),w=s({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),d=s(!1),v=s(!1),$={LaLiga:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},T=async()=>{if(!a.value||!e.value)return;d.value=!0;const o=setTimeout(()=>{v.value=!0},1e4),l=(await N.get("https://football-charts-backend.onrender.com/position-frequency",{params:{league_name:a.value,position:e.value}})).data,B=Object.entries(l).sort((t,h)=>h[1]-t[1]).map(([t,h])=>({name:t,y:h}));let u;e.value==1?u="st":e.value==2?u="nd":e.value==3?u="rd":u="th";const f=Object.keys(l).length,x=[];for(let t=1;t<=f;t++)x.push(`hsl(120, ${Math.floor(t/(f+1)*100)}%, ${Math.floor(t/(f+1)*100)}%)`);clearTimeout(o),d.value=!1,v.value=!1,_.value++,w.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"pie",height:500},colors:x,plotOptions:{pie:{dataLabels:{enabled:!0,useHTML:!0,style:{fontFamily:"Inter"},formatter:function(){return`<div class="row no-wrap items-center" style="font-size: 11px"><img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${$[a.value]}/${this.point.name}.png" style="width: 16px; margin-right: 6px">${this.point.name} (${this.point.y}) &#8203 &#8203 &#8203 &#8203 &#8203</div>`}}}},series:[{name:`Times finished ${e.value}${u}`,data:B}],credits:{enabled:!1}}};return g(a,()=>{e.value=null}),g(a,o=>{o=="Bundesliga"?r.value=18:r.value=20}),g(e,o=>{o>r.value?e.value=r.value:e.value!=null&&e.value<1&&(e.value=1)}),(o,i)=>(b(),Q(D,null,[y("div",G,[n(P,{modelValue:a.value,"onUpdate:modelValue":i[0]||(i[0]=l=>a.value=l)},null,8,["modelValue"]),n(I,{modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=l=>e.value=l),modelModifiers:{number:!0},disable:!a.value,outlined:"",rounded:"","bg-color":"white",dense:"",color:"secondary",style:{width:"110px"},label:"Pos."},{append:E(()=>[n(M,{round:"",dense:"",flat:"",icon:"remove",size:"10px",onMousedown:V,onMouseup:c,onMouseleave:c}),n(M,{round:"",dense:"",flat:"",icon:"add",size:"10px",onMousedown:C,onMouseup:c,onMouseleave:c})]),_:1},8,["modelValue","disable"]),n(S,{onClick:T})]),y("div",H,[d.value?(b(),k(z,{key:0})):L("",!0),n(F,{class:j({visible:v.value})},null,8,["class"]),y("div",K,[d.value?L("",!0):(b(),k(q(O.Chart),{key:_.value,options:w.value},null,8,["options"]))])])],64))}};export{Z as default};
