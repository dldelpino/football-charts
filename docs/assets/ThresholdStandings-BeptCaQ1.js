import{g as A,c as B,d as N,e as E,_ as G,S as z,L as K,a as U,b as F}from"./ShowResults-DA1P0JSS.js";import{_ as W}from"./ChartTable-BzKADjZE.js";import{c as S,a as x,h as k,j,Y as I,H as y,I as b,J as p,M as i,N as h,d as H,r as n,w as m,P as J,V as P,S as O,W as R,Q as Y,i as w}from"./index-qdgWiWBE.js";import{h as M,d as X,e as Z,c as ee}from"./QBtn-DBYRU0gM.js";import{Q as le}from"./QCard-BCtBCMHg.js";import{_ as V}from"./SelectNumber-B_j3AMrH.js";import"./format-BmOT1t1R.js";import"./use-dark-CHjzt7R4.js";import"./QTable-D4tPa26i.js";import"./QList-BJUYegDN.js";const L=S({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(a,{slots:e}){const l=x(()=>`q-card__section q-card__section--${a.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>k(a.tag,{class:l.value},M(e.default))}}),ae=S({name:"QCardActions",props:{...X,vertical:Boolean},setup(a,{slots:e}){const l=Z(a),s=x(()=>`q-card__actions ${l.value} q-card__actions--${a.vertical===!0?"vert column":"horiz row"}`);return()=>k("div",{class:s.value},M(e.default))}});function C(a){if(a===!1)return 0;if(a===!0||a===void 0)return 1;const e=parseInt(a,10);return isNaN(e)?0:e}const te=j({name:"close-popup",beforeMount(a,{value:e}){const l={depth:C(e),handler(s){l.depth!==0&&setTimeout(()=>{const d=A(a);d!==void 0&&B(d,s,l.depth)})},handlerKey(s){I(s,13)===!0&&l.handler(s)}};a.__qclosepopup=l,a.addEventListener("click",l.handler),a.addEventListener("keyup",l.handlerKey)},updated(a,{value:e,oldValue:l}){e!==l&&(a.__qclosepopup.depth=C(e))},beforeUnmount(a){const e=a.__qclosepopup;a.removeEventListener("click",e.handler),a.removeEventListener("keyup",e.handlerKey),delete a.__qclosepopup}}),se={};function oe(a,e){return b(),y(E,null,{default:p(()=>[i(le,{class:"card"},{default:p(()=>[i(L,null,{default:p(()=>[...e[0]||(e[0]=[h("div",{class:"text-h4",style:{"font-weight":"bold"}},"Error",-1)])]),_:1}),i(L,null,{default:p(()=>[...e[1]||(e[1]=[h("div",{class:"text-h6",style:{"font-weight":"normal"}},"There is no data available for this selection. Try changing the parameters.",-1)])]),_:1}),i(ae,{align:"right"},{default:p(()=>[H(i(ee,{flat:"",label:"OK",color:"secondary",style:{"font-weight":"bold"}},null,512),[[te]])]),_:1})]),_:1})]),_:1})}const ne=N(se,[["render",oe]]),ie={class:"buttons-container"},re={class:"data-container"},_e={__name:"ThresholdStandings",setup(a){const e=n(null),l=n(null),s=n(null),d=n(null),v=n(null),D=w("leaguePositions"),$=w("specialLeagues"),Q=w("tableLegend"),u=n([]);let g;const c=n(!1),_=n(!1),f=n(!1),T=async()=>{if(!e.value)return;c.value=!0,f.value=!1;const t=setTimeout(()=>{_.value=!0},15e3);$.includes(e.value)?g=n([{name:"status",field:"status",label:"",sortable:!1,style:"width: 8px; padding: 0",headerStyle:"width: 8px; padding: 0"},{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 270px"},{name:"ppm_mw",field:"ppm_mw",label:`PPM after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"points_mw",field:"points_mw",label:`Points after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"ppm",field:"ppm",label:"PPM",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]):g=n([{name:"status",field:"status",label:"",sortable:!1,style:"width: 8px; padding: 0",headerStyle:"width: 8px; padding: 0"},{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 270px"},{name:"points_mw",field:"points_mw",label:`Points after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]);const o=await F.get("https://football-charts-backend.onrender.com/threshold-standings",{params:{league_name:e.value,matches_played:l.value,threshold:s.value}});clearTimeout(t),c.value=!1,_.value=!1,u.value=o.data,console.log(!u.value.length),u.value.length||(f.value=!0)};m(e,()=>{l.value=null,s.value=null}),m(l,()=>{s.value=null}),m(e,t=>{d.value=2*(D[t]-1)}),m(l,t=>{t!=null&&(v.value=3*t),t>d.value?l.value=d.value:t!=null&&t<1&&(l.value=1)}),m(s,t=>{t>v.value?s.value=v.value:t!=null&&t<0&&(s.value=0)});const q=x(()=>Q.filter(t=>u.value.some(o=>o.status==t.key)));return(t,o)=>(b(),J(Y,null,[i(ne,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=r=>f.value=r)},null,8,["modelValue"]),h("div",ie,[i(G,{modelValue:e.value,"onUpdate:modelValue":o[1]||(o[1]=r=>e.value=r)},null,8,["modelValue"]),i(V,{modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=r=>l.value=r),modelModifiers:{number:!0},disable:!e.value,label:"MP"},null,8,["modelValue","disable"]),i(V,{modelValue:s.value,"onUpdate:modelValue":o[3]||(o[3]=r=>s.value=r),modelModifiers:{number:!0},disable:!l.value,style:{width:"122px"},label:"Points"},null,8,["modelValue","disable"]),i(z,{onClick:T})]),h("div",re,[c.value?(b(),y(U,{key:0})):P("",!0),i(K,{class:O({visible:_.value})},null,8,["class"]),u.value.length&&!c.value?(b(),y(W,{key:1,rows:u.value,columns:R(g),legend:q.value},null,8,["rows","columns","legend"])):P("",!0)])],64))}};export{_e as default};
