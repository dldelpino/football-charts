import{h as _}from"./highcharts-vue.min-DHK0wmz1.js";import{_ as x,S as L,L as w,a as k,b as C}from"./ShowResults-CEYO8yyf.js";import{u as t,N as S,G as u,L as h,K as d,F as f,S as v,R as V,T as $,O as B}from"./index-BcmdxCfv.js";import"./QBtn-CMVIYa3w.js";import"./format-DiZDpJ_r.js";const F={class:"buttons-container"},T={class:"data-container"},q={__name:"PromotionFrequency",setup(E){const a=t(null),m=t(0),p=t({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),s=t(!1),l=t(!1),b={LaLiga:"Spain",LaLiga2:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},y=async()=>{if(!a.value)return;s.value=!0;const g=setTimeout(()=>{l.value=!0},1e4),r=(await C.get("https://football-charts-backend.onrender.com/promotion-frequency",{params:{league_name:a.value}})).data;m.value++;const o=Object.entries(r).sort((e,c)=>c[1]-e[1]).map(([e,c])=>({name:e,y:c})),i=o[0].y;o.forEach(e=>{e.name=`<div class="row no-wrap items-center" style="font-size: 11px;">${e.name}<img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${b[a.value]}/${e.name}.png" style="width: 16px; margin-left: 6px;"></div>`,e.color=`hsl(120, ${(1-e.y/(i+1))*100}%, ${(1-e.y/(i+1))*100}%)`}),clearTimeout(g),s.value=!1,l.value=!1,p.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"bar",height:30*o.length,width:800,marginRight:20},tooltip:{outside:!0},legend:{enabled:!1},xAxis:{type:"category",labels:{useHTML:!0}},yAxis:{max:i,title:"",labels:{enabled:!1}},plotOptions:{bar:{dataLabels:{enabled:!0,overflow:"allow",crop:!1,style:{fontFamily:"Inter"}}}},series:[{name:"Times promoted",data:o,pointWidth:20}],credits:{enabled:!1}}};return(g,n)=>(u(),S(B,null,[h("div",F,[d(x,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=r=>a.value=r)},null,8,["modelValue"]),d(L,{onClick:y})]),h("div",T,[s.value?(u(),f(k,{key:0})):v("",!0),d(w,{class:V({visible:l.value})},null,8,["class"]),s.value?v("",!0):(u(),f($(_.Chart),{key:m.value,options:p.value},null,8,["options"]))])],64))}};export{q as default};
