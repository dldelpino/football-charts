import{g as T,c as A,d as N,e as E,_ as G,S as z,L as K,a as U,b as F}from"./ShowResults-vaSCvGOq.js";import{_ as I}from"./ChartTable-O3hqT847.js";import{c as P,a as v,h as q,g as W,j,X as H,H as x,I as b,J as c,M as r,N as h,d as J,r as n,w as m,P as O,V,S as R,W as X,Q as Y,i as y}from"./index-BFLqRv9F.js";import{h as k,d as Z,e as ee,c as ae}from"./QBtn-Cc9BGu34.js";import{a as le,c as te}from"./format-DrWidby5.js";import{_ as C}from"./SelectNumber-Dkq5aPJc.js";import"./QTable-y0yCDOCI.js";import"./QList-DTpxc1Xp.js";const L=P({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:a}){const l=v(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>q(e.tag,{class:l.value},k(a.default))}}),se=P({name:"QCardActions",props:{...Z,vertical:Boolean},setup(e,{slots:a}){const l=ee(e),t=v(()=>`q-card__actions ${l.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>q("div",{class:t.value},k(a.default))}}),oe=P({name:"QCard",props:{...le,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:a}){const{proxy:{$q:l}}=W(),t=te(e,l),i=v(()=>"q-card"+(t.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>q(e.tag,{class:i.value},k(a.default))}});function S(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const ne=j({name:"close-popup",beforeMount(e,{value:a}){const l={depth:S(a),handler(t){l.depth!==0&&setTimeout(()=>{const i=T(e);i!==void 0&&A(i,t,l.depth)})},handlerKey(t){H(t,13)===!0&&l.handler(t)}};e.__qclosepopup=l,e.addEventListener("click",l.handler),e.addEventListener("keyup",l.handlerKey)},updated(e,{value:a,oldValue:l}){a!==l&&(e.__qclosepopup.depth=S(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}}),re={};function ie(e,a){return b(),x(E,null,{default:c(()=>[r(oe,{class:"card"},{default:c(()=>[r(L,null,{default:c(()=>[...a[0]||(a[0]=[h("div",{class:"text-h4",style:{"font-weight":"bold"}},"Error",-1)])]),_:1}),r(L,null,{default:c(()=>[...a[1]||(a[1]=[h("div",{class:"text-h6",style:{"font-weight":"normal"}},"There is no data available for this selection. Try changing the parameters.",-1)])]),_:1}),r(se,{align:"right"},{default:c(()=>[J(r(ae,{flat:"",label:"OK",color:"secondary",style:{"font-weight":"bold"}},null,512),[[ne]])]),_:1})]),_:1})]),_:1})}const de=N(re,[["render",ie]]),ue={class:"buttons-container"},ce={class:"data-container"},we={__name:"ThresholdStandings",setup(e){const a=n(null),l=n(null),t=n(null),i=n(null),g=n(null),D=y("leaguePositions"),M=y("specialLeagues"),$=y("tableLegend"),u=n([]);let _;const p=n(!1),w=n(!1),f=n(!1),B=async()=>{if(!a.value)return;p.value=!0,f.value=!1;const s=setTimeout(()=>{w.value=!0},15e3);M.includes(a.value)?_=n([{name:"status",field:"status",label:"",sortable:!1,style:"width: 8px; padding: 0",headerStyle:"width: 8px; padding: 0"},{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 270px"},{name:"ppm_mw",field:"ppm_mw",label:`PPM after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"points_mw",field:"points_mw",label:`Points after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"ppm",field:"ppm",label:"PPM",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]):_=n([{name:"status",field:"status",label:"",sortable:!1,style:"width: 8px; padding: 0",headerStyle:"width: 8px; padding: 0"},{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 270px"},{name:"points_mw",field:"points_mw",label:`Points after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]);const o=await F.get("https://football-charts-backend.onrender.com/threshold-standings",{params:{league_name:a.value,matches_played:l.value,threshold:t.value}});clearTimeout(s),p.value=!1,w.value=!1,u.value=o.data,console.log(!u.value.length),u.value.length||(f.value=!0)};m(a,()=>{l.value=null,t.value=null}),m(l,()=>{t.value=null}),m(a,s=>{i.value=2*(D[s]-1)}),m(l,s=>{s!=null&&(g.value=3*s),s>i.value?l.value=i.value:s!=null&&s<1&&(l.value=1)}),m(t,s=>{s>g.value?t.value=g.value:s!=null&&s<0&&(t.value=0)});const Q=v(()=>$.filter(s=>u.value.some(o=>o.status==s.key)));return(s,o)=>(b(),O(Y,null,[r(de,{modelValue:f.value,"onUpdate:modelValue":o[0]||(o[0]=d=>f.value=d)},null,8,["modelValue"]),h("div",ue,[r(G,{modelValue:a.value,"onUpdate:modelValue":o[1]||(o[1]=d=>a.value=d)},null,8,["modelValue"]),r(C,{modelValue:l.value,"onUpdate:modelValue":o[2]||(o[2]=d=>l.value=d),modelModifiers:{number:!0},disable:!a.value,label:"MP"},null,8,["modelValue","disable"]),r(C,{modelValue:t.value,"onUpdate:modelValue":o[3]||(o[3]=d=>t.value=d),modelModifiers:{number:!0},disable:!l.value,style:{width:"122px"},label:"Points"},null,8,["modelValue","disable"]),r(z,{onClick:B})]),h("div",ce,[p.value?(b(),x(U,{key:0})):V("",!0),r(K,{class:R({visible:w.value})},null,8,["class"]),u.value.length&&!p.value?(b(),x(I,{key:1,rows:u.value,columns:X(_),legend:Q.value},null,8,["rows","columns","legend"])):V("",!0)])],64))}};export{we as default};
