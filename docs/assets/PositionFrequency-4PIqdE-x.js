import{_ as V,S as $,Q as w,a as S}from"./SelectLeague--_UXUj-w.js";import{h as C}from"./highcharts-vue.min-BRe60aAG.js";import{S as L}from"./SelectPosition-CWxX7Ytw.js";import{u as o,w as d,N as B,G as m,L as p,K as v,F as b,S as y,T as P,P as F}from"./index-C4BYQMLa.js";import"./QBtn-jqsTegq2.js";import"./format-CiJwv4rK.js";const O={class:"buttons-container"},M={class:"buttons-container",style:{"padding-bottom":"30px"}},N={class:"chart-container"},I={__name:"PositionFrequency",setup(E){const a=o(null),e=o(null),n=o(null),x={LaLiga:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},f=o(0),h=o({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),r=o(!1),_=async()=>{if(r.value=!0,!a.value||!e.value)return;const s=(await S.get("https://football-charts-backend.onrender.com/position-frequency",{params:{league_name:a.value,position:e.value}})).data,l=Object.keys(s).length,g=[];for(let t=1;t<=l;t++)g.push(`hsl(120, ${Math.floor(t/(l+1)*100)}%, ${Math.floor(t/(l+1)*100)}%)`);const k=Object.entries(s).sort((t,c)=>c[1]-t[1]).map(([t,c])=>({name:t,y:c}));let i;e.value==1?i="st":e.value==2?i="nd":e.value==3?i="rd":i="th",r.value=!1,f.value++,h.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"pie",height:600},colors:g,plotOptions:{pie:{dataLabels:{enabled:!0,useHTML:!0,style:{fontFamily:"Inter"},formatter:function(){return`<div class="row no-wrap items-center" style="font-size: 11px"><img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${x[a.value]}/${this.point.name}.png" style="width: 16px; margin-right: 6px">${this.point.name} (${this.point.y}) &#8203 &#8203 &#8203 &#8203 &#8203</div>`}}}},series:[{name:`Times finished ${e.value}${i}`,data:k}],credits:{enabled:!1}}};return d(a,()=>{e.value=null}),d(a,u=>{u=="Bundesliga"?n.value=18:n.value=20}),d(e,()=>{e.value>n.value?e.value=n.value:e.value!=null&&e.value<1&&(e.value=1)}),(u,s)=>(m(),B(F,null,[p("div",O,[v(V,{modelValue:a.value,"onUpdate:modelValue":s[0]||(s[0]=l=>a.value=l)},null,8,["modelValue"]),v(L,{modelValue:e.value,"onUpdate:modelValue":s[1]||(s[1]=l=>e.value=l),modelModifiers:{number:!0},disable:!a.value,max:n.value},null,8,["modelValue","disable","max"]),v($,{onClick:_})]),p("div",M,[r.value?(m(),b(w,{key:0,style:{"margin-top":"50px"},color:"secondary",size:"50px",thickness:10})):y("",!0),p("div",N,[r.value?y("",!0):(m(),b(P(C.Chart),{key:f.value,options:h.value},null,8,["options"]))])])],64))}};export{I as default};
