import{Q as V}from"./QSpinnerPuff-HQ7bTo4Z.js";import{h as w}from"./highcharts-vue.min-BHABQtnv.js";import{_ as $,S,a as C}from"./SelectLeague-4guUeSOx.js";import{S as L}from"./SelectPosition-DJbbnXIW.js";import{r as s,w as m,N as B,G as d,L as g,K as p,F as b,S as y,T as P,P as F}from"./index-7wzqU85B.js";import"./QBtn-CzeR243Z.js";import"./format-BZENIv50.js";const O={class:"buttons-container"},M={class:"buttons-container",style:{"padding-bottom":"30px"}},I={__name:"PositionFrequency",setup(N){const t=s(null),e=s(null),n=s(null),x={LaLiga:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},v=s(0),f=s({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),r=s(!1),_=async()=>{if(r.value=!0,!t.value||!e.value)return;const l=(await C.get("https://football-charts-backend.onrender.com/position-frequency",{params:{league_name:t.value,position:e.value}})).data,o=Object.keys(l).length,h=[];for(let a=1;a<=o;a++)h.push(`hsl(120, ${Math.floor(a/(o+1)*100)}%, ${Math.floor(a/(o+1)*100)}%)`);const k=Object.entries(l).sort((a,c)=>c[1]-a[1]).map(([a,c])=>({name:a,y:c}));let i;e.value==1?i="st":e.value==2?i="nd":e.value==3?i="rd":i="th",r.value=!1,v.value++,f.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"pie",height:700,width:1e3},colors:h,plotOptions:{pie:{size:500,dataLabels:{enabled:!0,useHTML:!0,style:{fontFamily:"Inter"},formatter:function(){return`<div class="row no-wrap items-center" style="font-size: 11px"><img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${x[t.value]}/${this.point.name}.png" style="width: 16px; margin-right: 6px">${this.point.name} (${this.point.y}) &#8203 &#8203 &#8203 &#8203 &#8203</div>`}}}},series:[{name:`Times finished ${e.value}${i}`,data:k}],credits:{enabled:!1}}};return m(t,()=>{e.value=null}),m(t,u=>{u=="Bundesliga"?n.value=18:n.value=20}),m(e,()=>{e.value>n.value?e.value=n.value:e.value!=null&&e.value<1&&(e.value=1)}),(u,l)=>(d(),B(F,null,[g("div",O,[p($,{modelValue:t.value,"onUpdate:modelValue":l[0]||(l[0]=o=>t.value=o)},null,8,["modelValue"]),p(L,{modelValue:e.value,"onUpdate:modelValue":l[1]||(l[1]=o=>e.value=o),modelModifiers:{number:!0},disable:!t.value,max:n.value},null,8,["modelValue","disable","max"]),p(S,{onClick:_})]),g("div",M,[r.value?(d(),b(V,{key:0,style:{"margin-top":"50px"},color:"green-10",size:"50px",thickness:10})):y("",!0),r.value?y("",!0):(d(),b(P(w.Chart),{key:v.value,options:f.value},null,8,["options"]))])],64))}};export{I as default};
