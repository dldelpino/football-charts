import{_ as k,S as $,L as w,a as x,b as V}from"./ShowResults-DqZohlsW.js";import{h as C}from"./highcharts-vue.min-BYnk47W4.js";import{i as b,r as l,A as M,P as y,I as u,H as h,W as O,w as f,N as g,M as m,V as _,S as P,Q as j}from"./index-CCOr-aBu.js";import{_ as L}from"./SelectNumber-FiTZir5Y.js";import"./QBtn-CFDTNVsL.js";import"./format-CP9rsUGh.js";const N={style:{width:"90%"}},S={__name:"ChartPie",props:{data:{type:Object,required:!0},league:{type:String},position:{type:Number}},setup(v){const e=v,a=b("leagueCountry"),r=l(0),c=l({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}});function d(){if(!Object.keys(e.data).length)return;const n=Object.entries(e.data).sort((t,i)=>i[1]-t[1]).map(([t,i])=>({name:t,y:i})),o=Object.keys(e.data).length,p=[];for(let t=1;t<=o;t++)p.push(`hsl(120, ${Math.floor(t/(o+1)*100)}%, ${Math.floor(t/(o+1)*100)}%)`);let s;e.position==1?s="st":e.position==2?s="nd":e.position==3?s="rd":s="th",r.value++,c.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"pie",height:500},colors:p,plotOptions:{pie:{dataLabels:{enabled:!0,useHTML:!0,style:{fontFamily:"Inter"},formatter:function(){return`<div class="row no-wrap items-center" style="font-size: 11px"><img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${a[e.league]}/${this.point.name}.png" style="width: 16px; margin-right: 6px">${this.point.name} (${this.point.y}) &#8203 &#8203 &#8203 &#8203 &#8203</div>`}}}},series:[{name:`Times finished ${e.position}${s}`,data:n}],credits:{enabled:!1}}}return M(()=>{d()}),(n,o)=>(u(),y("div",N,[(u(),h(O(C.Chart),{key:r.value,options:c.value},null,8,["options"]))]))}},B={class:"buttons-container"},T={class:"data-container"},I={__name:"PositionFrequency",setup(v){const e=l(null),a=l(null),r=l(null),c=b("leaguePositions"),d=l([]),n=l(!1),o=l(!1),p=async()=>{if(!e.value||!a.value)return;n.value=!0;const s=setTimeout(()=>{o.value=!0},1e4),t=await V.get("https://football-charts-backend.onrender.com/position-frequency",{params:{league_name:e.value,position:a.value}});clearTimeout(s),n.value=!1,o.value=!1,d.value=t.data};return f(e,()=>{a.value=null}),f(e,s=>{r.value=c[s]}),f(a,s=>{s>r.value?a.value=r.value:a.value!=null&&a.value<1&&(a.value=1)}),(s,t)=>(u(),y(j,null,[g("div",B,[m(k,{modelValue:e.value,"onUpdate:modelValue":t[0]||(t[0]=i=>e.value=i)},null,8,["modelValue"]),m(L,{modelValue:a.value,"onUpdate:modelValue":t[1]||(t[1]=i=>a.value=i),modelModifiers:{number:!0},disable:!e.value,label:"#"},null,8,["modelValue","disable"]),m($,{onClick:p})]),g("div",T,[n.value?(u(),h(x,{key:0})):_("",!0),m(w,{class:P({visible:o.value})},null,8,["class"]),n.value?_("",!0):(u(),h(S,{key:1,data:d.value,league:e.value,position:a.value},null,8,["data","league","position"]))])],64))}};export{I as default};
