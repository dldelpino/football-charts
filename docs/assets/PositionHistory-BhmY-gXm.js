import{Q as h}from"./QBtn-CMVIYa3w.js";import{Q as T}from"./QInput-DOUyh3Ds.js";import{Q as V,a as L}from"./QTable-CmEVCLUN.js";import{_ as Q,S,L as k,a as G,b as B}from"./ShowResults-CEYO8yyf.js";import{u as a,w as c,N as D,G as v,L as w,K as o,H as g,F as y,S as _,R as N,T as C,O as F,Q as I,M as z}from"./index-BcmdxCfv.js";import"./format-DiZDpJ_r.js";import"./QList-B2Z_JDPE.js";const A={class:"buttons-container"},H={class:"data-container"},R=["src"],J={__name:"PositionHistory",setup(U){const l=a(null),e=a(null),n=a(null);let d=null,m=null;const x=()=>{e.value--,m=setTimeout(()=>{d=setInterval(()=>e.value--,50)},250)},M=()=>{e.value++,m=setTimeout(()=>{d=setInterval(()=>e.value++,50)},250)},r=()=>{clearInterval(d),clearTimeout(m)},p=a([]);let f;const u=a(!1),b=a(!1),P=async()=>{if(!l.value||!e.value)return;u.value=!0;const t=setTimeout(()=>{b.value=!0},1e4);l.value=="Serie A"||l.value=="Ligue 1"?f=a([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 210px"},{name:"ppm",field:"ppm",label:"PPM",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]):f=a([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 210px"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]);const i=await B.get("https://football-charts-backend.onrender.com/position-history",{params:{league_name:l.value,position:e.value}});clearTimeout(t),u.value=!1,b.value=!1,p.value=i.data};return c(l,()=>{e.value=null}),c(l,t=>{t=="Bundesliga"?n.value=18:t=="LaLiga2"?n.value=22:n.value=20}),c(e,t=>{t>n.value?e.value=n.value:e.value!=null&&e.value<1&&(e.value=1)}),(t,i)=>(v(),D(F,null,[w("div",A,[o(Q,{modelValue:l.value,"onUpdate:modelValue":i[0]||(i[0]=s=>l.value=s)},null,8,["modelValue"]),o(T,{modelValue:e.value,"onUpdate:modelValue":i[1]||(i[1]=s=>e.value=s),modelModifiers:{number:!0},disable:!l.value,outlined:"",rounded:"","bg-color":"white",dense:"",color:"secondary",style:{width:"110px"},label:"Pos."},{append:g(()=>[o(h,{round:"",dense:"",flat:"",icon:"remove",size:"10px",onMousedown:x,onMouseup:r,onMouseleave:r}),o(h,{round:"",dense:"",flat:"",icon:"add",size:"10px",onMousedown:M,onMouseup:r,onMouseleave:r})]),_:1},8,["modelValue","disable"]),o(S,{onClick:P})]),w("div",H,[u.value?(v(),y(G,{key:0})):_("",!0),o(k,{class:N({visible:b.value})},null,8,["class"]),p.value.length&&!u.value?(v(),y(V,{key:1,class:"stats-table",flat:"",bordered:"",rows:p.value,columns:C(f),"virtual-scroll":"","hide-bottom":"","rows-per-page-options":[0]},{"body-cell-team":g(s=>[o(L,{props:s,style:{"align-items":"center"},class:"row"},{default:g(()=>[w("img",{src:s.row.logo,style:{width:"16px","margin-right":"8px"}},null,8,R),I(" "+z(s.row.team),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])):_("",!0)])],64))}};export{J as default};
