import{h as q,u as I,d as N,Q as b}from"./QBtn-24x0fXpJ.js";import{Q as C}from"./QInput-DaF0LYQZ.js";import{Q as G,a as E}from"./QTable-PqYQQLdh.js";import{g as K,d as U,e as F,f as W,_ as O,S as R,L as H,a as j,b as J}from"./ShowResults-NuKt9TTz.js";import{c as T,a as k,h as V,g as X,d as Y,W as Z,F as P,G as w,H as d,K as s,L as h,z as ee,u as r,w as v,N as ae,S as Q,R as le,T as te,O as se,Q as oe,M as ne}from"./index-k_HJJlfR.js";import{a as re,d as ie}from"./format-y4IBnE62.js";import"./QList-DfwCrStg.js";const D=T({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(l,{slots:e}){const a=k(()=>`q-card__section q-card__section--${l.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>V(l.tag,{class:a.value},q(e.default))}}),ue=T({name:"QCardActions",props:{...I,vertical:Boolean},setup(l,{slots:e}){const a=N(l),t=k(()=>`q-card__actions ${a.value} q-card__actions--${l.vertical===!0?"vert column":"horiz row"}`);return()=>V("div",{class:t.value},q(e.default))}}),de=T({name:"QCard",props:{...re,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(l,{slots:e}){const{proxy:{$q:a}}=X(),t=ie(l,a),i=k(()=>"q-card"+(t.value===!0?" q-card--dark q-dark":"")+(l.bordered===!0?" q-card--bordered":"")+(l.square===!0?" q-card--square no-border-radius":"")+(l.flat===!0?" q-card--flat no-shadow":""));return()=>V(l.tag,{class:i.value},q(e.default))}});function S(l){if(l===!1)return 0;if(l===!0||l===void 0)return 1;const e=parseInt(l,10);return isNaN(e)?0:e}const ce=Y({name:"close-popup",beforeMount(l,{value:e}){const a={depth:S(e),handler(t){a.depth!==0&&setTimeout(()=>{const i=K(l);i!==void 0&&U(i,t,a.depth)})},handlerKey(t){Z(t,13)===!0&&a.handler(t)}};l.__qclosepopup=a,l.addEventListener("click",a.handler),l.addEventListener("keyup",a.handlerKey)},updated(l,{value:e,oldValue:a}){e!==a&&(l.__qclosepopup.depth=S(e))},beforeUnmount(l){const e=l.__qclosepopup;l.removeEventListener("click",e.handler),l.removeEventListener("keyup",e.handlerKey),delete l.__qclosepopup}}),me={};function pe(l,e){return w(),P(W,null,{default:d(()=>[s(de,{class:"card"},{default:d(()=>[s(D,null,{default:d(()=>[...e[0]||(e[0]=[h("div",{class:"text-h4",style:{"font-weight":"bold"}},"Error",-1)])]),_:1}),s(D,null,{default:d(()=>[...e[1]||(e[1]=[h("div",{class:"text-h6",style:{"font-weight":"normal"}},"There is no data available for this selection. Try changing the parameters.",-1)])]),_:1}),s(ue,{align:"right"},{default:d(()=>[ee(s(b,{flat:"",label:"OK",color:"secondary",style:{"font-weight":"bold"}},null,512),[[ce]])]),_:1})]),_:1})]),_:1})}const fe=F(me,[["render",pe]]),ve={class:"buttons-container"},be={class:"data-container"},he=["src"],qe={__name:"ThresholdStandings",setup(l){const e=r(null),a=r(null),t=r(null),i=r(null),y=r(null);let m=null,p=null;const L=()=>{a.value--,p=setTimeout(()=>{m=setInterval(()=>a.value--,50)},250)},B=()=>{a.value++,p=setTimeout(()=>{m=setInterval(()=>a.value++,50)},250)},z=()=>{t.value--,p=setTimeout(()=>{m=setInterval(()=>t.value--,50)},250)},$=()=>{t.value++,p=setTimeout(()=>{m=setInterval(()=>t.value++,50)},250)},c=()=>{clearInterval(m),clearTimeout(p)},f=r([]);let x;const g=r(!1),M=r(!1),_=r(!1),A=async()=>{if(!e.value)return;g.value=!0,_.value=!1;const o=setTimeout(()=>{M.value=!0},15e3);e.value=="Serie A"||e.value=="Ligue 1"?x=r([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 210px"},{name:"ppm_mw",field:"ppm_mw",label:`PPM after ${a.value} MP`,sortable:!0,style:"width: 70px"},{name:"points_mw",field:"points_mw",label:`Points after ${a.value} MP`,sortable:!0,style:"width: 70px"},{name:"ppm",field:"ppm",label:"PPM",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]):x=r([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 210px"},{name:"points_mw",field:"points_mw",label:`Points after ${a.value} MP`,sortable:!0,style:"width: 70px"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]);const u=await J.get("https://football-charts-backend.onrender.com/threshold-standings",{params:{league_name:e.value,matches_played:a.value,threshold:t.value}});clearTimeout(o),g.value=!1,M.value=!1,f.value=u.data,console.log(!f.value.length),f.value.length||(_.value=!0)};return v(e,()=>{a.value=null,t.value=null}),v(a,()=>{t.value=null}),v(e,o=>{o=="Bundesliga"?i.value=34:o=="LaLiga2"?i.value=42:i.value=38}),v(a,o=>{o!=null&&(y.value=3*o),o>i.value?a.value=i.value:o!=null&&o<1&&(a.value=1)}),v(t,o=>{o>y.value?t.value=y.value:o!=null&&o<0&&(t.value=0)}),(o,u)=>(w(),ae(se,null,[s(fe,{modelValue:_.value,"onUpdate:modelValue":u[0]||(u[0]=n=>_.value=n)},null,8,["modelValue"]),h("div",ve,[s(O,{modelValue:e.value,"onUpdate:modelValue":u[1]||(u[1]=n=>e.value=n)},null,8,["modelValue"]),s(C,{modelValue:a.value,"onUpdate:modelValue":u[2]||(u[2]=n=>a.value=n),modelModifiers:{number:!0},disable:!e.value,outlined:"",rounded:"","bg-color":"white",dense:"",color:"secondary",style:{width:"110px"},label:"MP"},{append:d(()=>[s(b,{round:"",dense:"",flat:"",icon:"remove",size:"10px",onMousedown:L,onMouseup:c,onMouseleave:c}),s(b,{round:"",dense:"",flat:"",icon:"add",size:"10px",onMousedown:B,onMouseup:c,onMouseleave:c})]),_:1},8,["modelValue","disable"]),s(C,{modelValue:t.value,"onUpdate:modelValue":u[3]||(u[3]=n=>t.value=n),modelModifiers:{number:!0},disable:!a.value,outlined:"",rounded:"","bg-color":"white",dense:"",color:"secondary",style:{width:"110px"},label:"Pts."},{append:d(()=>[s(b,{round:"",dense:"",flat:"",icon:"remove",size:"10px",onMousedown:z,onMouseup:c,onMouseleave:c}),s(b,{round:"",dense:"",flat:"",icon:"add",size:"10px",onMousedown:$,onMouseup:c,onMouseleave:c})]),_:1},8,["modelValue","disable"]),s(R,{onClick:A})]),h("div",be,[g.value?(w(),P(j,{key:0})):Q("",!0),s(H,{class:le({visible:M.value})},null,8,["class"]),f.value.length&&!g.value?(w(),P(G,{key:1,class:"stats-table",flat:"",bordered:"",rows:f.value,columns:te(x),"virtual-scroll":"","hide-bottom":"","rows-per-page-options":[0]},{"body-cell-team":d(n=>[s(E,{props:n,style:{"align-items":"center"},class:"row"},{default:d(()=>[h("img",{src:n.row.logo,style:{width:"16px","margin-right":"8px"}},null,8,he),oe(" "+ne(n.row.team),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])):Q("",!0)])],64))}};export{qe as default};
