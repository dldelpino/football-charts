import{Q as v,a as h}from"./QTable-BfTvi9B-.js";import{_,S as x,P as y}from"./SelectLeague-7_ncoknL.js";import{S as N}from"./SelectPosition-BaIKJQJe.js";import{r as o,w as d,N as S,G as c,L as b,K as u,F as P,S as T,H as f,T as G,P as w,O as D,M as V}from"./index-C6mlnINT.js";import"./QBtn-1lZu7ACE.js";import"./format-CSC_wmZ4.js";import"./QList-Dm5VRfP4.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const L={class:"buttons-container"},M={class:"buttons-container",style:{"padding-bottom":"30px"}},A=["src"],E={__name:"PositionHistory",setup(F){const l=o(null),a=o(null),i=o(null),n=o([]);let m;const t=o([]);function g(){l.value=="Serie A"||l.value=="Ligue 1"?m=o([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 180px"},{name:"ppm",field:"ppm",label:"PPM",sortable:!0,align:"left",style:"width: 70px; font-weight: bold"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px"},{name:"mp",field:"mp",label:"MP",sortable:!0,style:"width: 70px"},{name:"w",field:"w",label:"W",sortable:!0,style:"width: 70px"},{name:"d",field:"d",label:"D",sortable:!0,style:"width: 70px"},{name:"l",field:"l",label:"L",sortable:!0,style:"width: 70px"},{name:"gf",field:"gf",label:"GF",sortable:!0,style:"width: 70px"},{name:"ga",field:"ga",label:"GA",sortable:!0,style:"width: 70px"},{name:"gd",field:"gd",label:"GD",sortable:!0,style:"width: 70px"},{name:"top_scorer",field:"top_scorer",label:"Top Scorer",sortable:!0,style:"width: 220px"},{name:"top_scorer_goals",field:"top_scorer_goals",label:"Top Scorer Goals",sortable:!0}]):m=o([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 180px"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"mp",field:"mp",label:"MP",sortable:!0,style:"width: 70px"},{name:"w",field:"w",label:"W",sortable:!0,style:"width: 70px"},{name:"d",field:"d",label:"D",sortable:!0,style:"width: 70px"},{name:"l",field:"l",label:"L",sortable:!0,style:"width: 70px"},{name:"gf",field:"gf",label:"GF",sortable:!0,style:"width: 70px"},{name:"ga",field:"ga",label:"GA",sortable:!0,style:"width: 70px"},{name:"gd",field:"gd",label:"GD",sortable:!0,style:"width: 70px"},{name:"top_scorer",field:"top_scorer",label:"Top Scorer",sortable:!0,style:"width: 220px"},{name:"top_scorer_goals",field:"top_scorer_goals",label:"Top Scorer Goals",sortable:!0}]),t.value=[],fetch(`data/${l.value.toLowerCase().replace(/\s+/g,"_")}.csv`).then(r=>r.text()).then(r=>{y.parse(r,{header:!0,complete:s=>{l.value=="Serie A"||l.value=="Ligue 1"?t.value=s.data.map(e=>({season:e.Season,position:Number(e["#"]),team:e.Team,ppm:Math.round(Number(e.Points)/Number(e.MP)*1e3)/1e3,points:Number(e.Points),mp:e.MP,w:Number(e.W),d:Number(e.D),l:Number(e.L),gf:Number(e.GF),ga:Number(e.GA),gd:Number(e.GD),top_scorer:e["Top Scorer"],top_scorer_goals:Number(e["Top Scorer Goals"]),logo:`icons/teams/${l.value}/${e.Team}.png`})):t.value=s.data.map(e=>({season:e.Season,position:Number(e["#"]),team:e.Team,points:Number(e.Points),mp:e.MP,w:Number(e.W),d:Number(e.D),l:Number(e.L),gf:Number(e.GF),ga:Number(e.GA),gd:Number(e.GD),top_scorer:e["Top Scorer"],top_scorer_goals:Number(e["Top Scorer Goals"]),logo:`icons/teams/${l.value}/${e.Team}.png`})),t.value=t.value.filter(e=>e.position==a.value),l.value=="Serie A"||l.value=="Ligue 1"?n.value=t.value.sort((e,p)=>p.ppm-e.ppm):n.value=t.value.sort((e,p)=>p.points-e.points)}})})}return d(l,()=>{a.value=null}),d(l,r=>{r=="Bundesliga"?i.value=18:i.value=20}),d(a,()=>{a.value>i.value?a.value=i.value:a.value!=null&&a.value<1&&(a.value=1)}),(r,s)=>(c(),S(w,null,[b("div",L,[u(_,{modelValue:l.value,"onUpdate:modelValue":s[0]||(s[0]=e=>l.value=e)},null,8,["modelValue"]),u(N,{modelValue:a.value,"onUpdate:modelValue":s[1]||(s[1]=e=>a.value=e),modelModifiers:{number:!0},disable:!l.value,max:i.value},null,8,["modelValue","disable","max"]),u(x,{onClick:g})]),b("div",M,[n.value.length?(c(),P(v,{key:0,class:"stats-table",flat:"",bordered:"",rows:n.value,columns:G(m),"virtual-scroll":"","hide-bottom":"","rows-per-page-options":[0]},{"body-cell-team":f(e=>[u(h,{props:e,style:{"align-items":"center"},class:"row"},{default:f(()=>[b("img",{src:e.row.logo,style:{width:"16px","margin-right":"8px"}},null,8,A),D(" "+V(e.row.team),1)]),_:2},1032,["props"])]),_:1},8,["rows","columns"])):T("",!0)])],64))}};export{E as default};
