import{Q as y}from"./QSpinnerPuff-HQ7bTo4Z.js";import{_ as v,S as x,a as _}from"./SelectLeague-4guUeSOx.js";import{h as k}from"./highcharts-vue.min-BHABQtnv.js";import{r as n,N as w,G as i,L as d,K as p,F as m,S as g,T as C,P as L}from"./index-7wzqU85B.js";import"./QBtn-CzeR243Z.js";import"./format-BZENIv50.js";const V={class:"buttons-container"},S={class:"buttons-container",style:{"padding-bottom":"30px"}},P={__name:"RelegationFrequency",setup($){const t=n(null),f={LaLiga:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},c=n(0),u=n({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),s=n(!1),h=async()=>{if(s.value=!0,!t.value)return;const o=(await _.get("https://football-charts-backend.onrender.com/relegation-frequency",{params:{league_name:t.value}})).data;c.value++;const a=Object.entries(o).sort((e,r)=>r[1]-e[1]).map(([e,r])=>({name:e,y:r})),l=a[0].y;a.forEach(e=>{e.name=`<div class="row no-wrap items-center" style="font-size: 11px;">${e.name}<img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${f[t.value]}/${e.name}.png" style="width: 16px; margin-left: 6px;"></div>`,e.color=`hsl(120, ${(1-e.y/(l+1))*100}%, ${(1-e.y/(l+1))*100}%)`}),s.value=!1,u.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"bar",height:30*a.length,width:800,marginRight:20},legend:{enabled:!1},xAxis:{type:"category",labels:{useHTML:!0}},yAxis:{max:l,title:"",labels:{enabled:!1}},plotOptions:{bar:{dataLabels:{enabled:!0,overflow:"allow",crop:!1,style:{fontFamily:"Inter"}}}},series:[{name:"Times relegated",data:a,pointWidth:20}],credits:{enabled:!1}}};return(b,o)=>(i(),w(L,null,[d("div",V,[p(v,{modelValue:t.value,"onUpdate:modelValue":o[0]||(o[0]=a=>t.value=a)},null,8,["modelValue"]),p(x,{onClick:h})]),d("div",S,[s.value?(i(),m(y,{key:0,style:{"margin-top":"50px"},color:"green-10",size:"50px",thickness:10})):g("",!0),s.value?g("",!0):(i(),m(C(k.Chart),{key:c.value,options:u.value},null,8,["options"]))])],64))}};export{P as default};
