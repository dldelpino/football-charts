import{_ as V,S as w,Q as $,a as S}from"./SelectLeague-D5uViW3x.js";import{h as C}from"./highcharts-vue.min-DMUlQVSl.js";import{S as L}from"./SelectPosition-DfsWKklK.js";import{r as o,w as d,N as B,G as m,L as g,K as p,F as b,S as y,T as P,P as F}from"./index-CV0CJrC4.js";import"./QBtn-Dh7W668e.js";import"./format-Cn2tjSP6.js";const O={class:"buttons-container"},M={class:"buttons-container",style:{"padding-bottom":"30px"}},G={__name:"PositionFrequency",setup(N){const a=o(null),e=o(null),n=o(null),x={LaLiga:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},v=o(0),f=o({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),r=o(!1),_=async()=>{if(r.value=!0,!a.value||!e.value)return;const l=(await S.get("https://football-charts-backend.onrender.com/position-frequency",{params:{league_name:a.value,position:e.value}})).data,s=Object.keys(l).length,h=[];for(let t=1;t<=s;t++)h.push(`hsl(120, ${Math.floor(t/(s+1)*100)}%, ${Math.floor(t/(s+1)*100)}%)`);const k=Object.entries(l).sort((t,c)=>c[1]-t[1]).map(([t,c])=>({name:t,y:c}));let i;e.value==1?i="st":e.value==2?i="nd":e.value==3?i="rd":i="th",r.value=!1,v.value++,f.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"pie",height:700,width:1e3},colors:h,plotOptions:{pie:{size:500,dataLabels:{enabled:!0,useHTML:!0,style:{fontFamily:"Inter"},formatter:function(){return`<div class="row no-wrap items-center" style="font-size: 11px"><img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${x[a.value]}/${this.point.name}.png" style="width: 16px; margin-right: 6px">${this.point.name} (${this.point.y}) &#8203 &#8203 &#8203 &#8203 &#8203</div>`}}}},series:[{name:`Times finished ${e.value}${i}`,data:k}],credits:{enabled:!1}}};return d(a,()=>{e.value=null}),d(a,u=>{u=="Bundesliga"?n.value=18:n.value=20}),d(e,()=>{e.value>n.value?e.value=n.value:e.value!=null&&e.value<1&&(e.value=1)}),(u,l)=>(m(),B(F,null,[g("div",O,[p(V,{modelValue:a.value,"onUpdate:modelValue":l[0]||(l[0]=s=>a.value=s)},null,8,["modelValue"]),p(L,{modelValue:e.value,"onUpdate:modelValue":l[1]||(l[1]=s=>e.value=s),modelModifiers:{number:!0},disable:!a.value,max:n.value},null,8,["modelValue","disable","max"]),p(w,{onClick:_})]),g("div",M,[r.value?(m(),b($,{key:0,style:{"margin-top":"50px"},color:"green-10",size:"50px",thickness:10})):y("",!0),r.value?y("",!0):(m(),b(P(C.Chart),{key:v.value,options:f.value},null,8,["options"]))])],64))}};export{G as default};
