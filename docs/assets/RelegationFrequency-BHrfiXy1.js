import{_ as y,S as v,Q as x,a as _}from"./SelectLeague-D5uViW3x.js";import{h as k}from"./highcharts-vue.min-DMUlQVSl.js";import{r as l,N as w,G as i,L as d,K as p,F as m,S as g,T as C,P as L}from"./index-CV0CJrC4.js";import"./QBtn-Dh7W668e.js";import"./format-Cn2tjSP6.js";const V={class:"buttons-container"},S={class:"buttons-container",style:{"padding-bottom":"30px"}},O={__name:"RelegationFrequency",setup($){const t=l(null),h={LaLiga:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},c=l(0),u=l({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),s=l(!1),f=async()=>{if(s.value=!0,!t.value)return;const n=(await _.get("https://football-charts-backend.onrender.com/relegation-frequency",{params:{league_name:t.value}})).data;c.value++;const a=Object.entries(n).sort((e,r)=>r[1]-e[1]).map(([e,r])=>({name:e,y:r})),o=a[0].y;a.forEach(e=>{e.name=`<div class="row no-wrap items-center" style="font-size: 11px;">${e.name}<img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${h[t.value]}/${e.name}.png" style="width: 16px; margin-left: 6px;"></div>`,e.color=`hsl(120, ${(1-e.y/(o+1))*100}%, ${(1-e.y/(o+1))*100}%)`}),s.value=!1,u.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"bar",height:30*a.length,width:800,marginRight:20},legend:{enabled:!1},xAxis:{type:"category",labels:{useHTML:!0}},yAxis:{max:o,title:"",labels:{enabled:!1}},plotOptions:{bar:{dataLabels:{enabled:!0,overflow:"allow",crop:!1,style:{fontFamily:"Inter"}}}},series:[{name:"Times relegated",data:a,pointWidth:20}],credits:{enabled:!1}}};return(b,n)=>(i(),w(L,null,[d("div",V,[p(y,{modelValue:t.value,"onUpdate:modelValue":n[0]||(n[0]=a=>t.value=a)},null,8,["modelValue"]),p(v,{onClick:f})]),d("div",S,[s.value?(i(),m(x,{key:0,style:{"margin-top":"50px"},color:"green-10",size:"50px",thickness:10})):g("",!0),s.value?g("",!0):(i(),m(C(k.Chart),{key:c.value,options:u.value},null,8,["options"]))])],64))}};export{O as default};
