import{h as _}from"./highcharts-vue.min-DrW9eCuL.js";import{_ as x,S as L,P as S}from"./SelectLeague-7_ncoknL.js";import{r as p,N as $,G as g,L as b,K as v,F as w,T as V,P as k}from"./index-C6mlnINT.js";import"./QBtn-1lZu7ACE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-CSC_wmZ4.js";const C={class:"buttons-container"},B={class:"buttons-container",style:{"padding-bottom":"30px"}},M={__name:"RelegationFrequency",setup(R){const t=p(null),d=p({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),m=p(0);function y(){fetch(`data/${t.value.toLowerCase().replace(/\s+/g,"_")}.csv`).then(n=>n.text()).then(n=>{S.parse(n,{header:!0,complete:r=>{m.value++;const l=[];for(let e=0;e<25;e++){const o=String(e).padStart(2,"0"),u=String(e+1).padStart(2,"0");l.push(`${o}/${u}`)}const a={};for(let e=24;e>=0;e--)if(e==24)t.value=="LaLiga"?(a.Leganés=1,a["Las Palmas"]=1,a.Valladolid=1):t.value=="Premier League"?(a["Leicester City"]=1,a["Ipswich Town"]=1,a.Southampton=1):t.value=="Serie A"?(a.Empoli=1,a.Venezia=1,a.Monza=1):t.value=="Bundesliga"?(a["Holstein Kiel"]=1,a.Bochum=1):t.value=="Ligue 1"&&(a.Reims=1,a["Saint-Étienne"]=1,a.Montpellier=1);else{const o=l[e],u=l[e+1],h=[],f=[];r.data.forEach(s=>{s.Season==o?h.push(s.Team):s.Season==u&&f.push(s.Team)}),h.filter(s=>!f.includes(s)).map(s=>{a[s]=(a[s]||0)+1})}const i=Object.entries(a).sort((e,o)=>o[1]-e[1]).map(([e,o])=>({name:e,y:o})),c=i[0].y;i.forEach(e=>{e.name=`<div class="row no-wrap items-center" style="font-size: 11px">${e.name}<img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${t.value}/${e.name}.png" style="width: 16px; margin-left: 6px"></div>`,e.color=`hsl(120, ${(1-e.y/(c+1))*100}%, ${(1-e.y/(c+1))*100}%)`}),d.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"bar",height:30*i.length,width:800,marginRight:20},legend:{enabled:!1},xAxis:{type:"category",labels:{useHTML:!0}},yAxis:{max:c,title:"",labels:{enabled:!1}},plotOptions:{bar:{dataLabels:{enabled:!0,overflow:"allow",crop:!1,style:{fontFamily:"Inter"}}}},series:[{name:"Times promoted",data:i,pointWidth:20}],credits:{enabled:!1}}}})})}return(n,r)=>(g(),$(k,null,[b("div",C,[v(x,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value=l)},null,8,["modelValue"]),v(L,{onClick:y})]),b("div",B,[(g(),w(V(_.Chart),{key:m.value,options:d.value},null,8,["options"]))])],64))}};export{M as default};
