import{g as T,d as $,e as Q,f as A,_ as G,S as N,L as z,a as E,b as K}from"./ShowResults-Nx2Mhmat.js";import{C as U}from"./ChartTable-zjl49pKN.js";import{c as y,a as x,h as P,g as F,d as I,X as O,F as w,G as b,H as c,K as n,L as v,z as R,u as o,w as m,N as W,S as C,R as j,T as H,O as X,i as k}from"./index-f5IyWRG0.js";import{h as q,u as J,d as Y,Q as Z}from"./QBtn-BcJNBAYa.js";import{a as ee,d as ae}from"./format-CXuO-1qg.js";import{_ as V}from"./SelectNumber-CTcQuaoc.js";import"./QList-DTPNfQwu.js";const D=y({name:"QCardSection",props:{tag:{type:String,default:"div"},horizontal:Boolean},setup(e,{slots:a}){const l=x(()=>`q-card__section q-card__section--${e.horizontal===!0?"horiz row no-wrap":"vert"}`);return()=>P(e.tag,{class:l.value},q(a.default))}}),le=y({name:"QCardActions",props:{...J,vertical:Boolean},setup(e,{slots:a}){const l=Y(e),t=x(()=>`q-card__actions ${l.value} q-card__actions--${e.vertical===!0?"vert column":"horiz row"}`);return()=>P("div",{class:t.value},q(a.default))}}),te=y({name:"QCard",props:{...ee,tag:{type:String,default:"div"},square:Boolean,flat:Boolean,bordered:Boolean},setup(e,{slots:a}){const{proxy:{$q:l}}=F(),t=ae(e,l),i=x(()=>"q-card"+(t.value===!0?" q-card--dark q-dark":"")+(e.bordered===!0?" q-card--bordered":"")+(e.square===!0?" q-card--square no-border-radius":"")+(e.flat===!0?" q-card--flat no-shadow":""));return()=>P(e.tag,{class:i.value},q(a.default))}});function L(e){if(e===!1)return 0;if(e===!0||e===void 0)return 1;const a=parseInt(e,10);return isNaN(a)?0:a}const se=I({name:"close-popup",beforeMount(e,{value:a}){const l={depth:L(a),handler(t){l.depth!==0&&setTimeout(()=>{const i=T(e);i!==void 0&&$(i,t,l.depth)})},handlerKey(t){O(t,13)===!0&&l.handler(t)}};e.__qclosepopup=l,e.addEventListener("click",l.handler),e.addEventListener("keyup",l.handlerKey)},updated(e,{value:a,oldValue:l}){a!==l&&(e.__qclosepopup.depth=L(a))},beforeUnmount(e){const a=e.__qclosepopup;e.removeEventListener("click",a.handler),e.removeEventListener("keyup",a.handlerKey),delete e.__qclosepopup}}),oe={};function ne(e,a){return b(),w(A,null,{default:c(()=>[n(te,{class:"card"},{default:c(()=>[n(D,null,{default:c(()=>[...a[0]||(a[0]=[v("div",{class:"text-h4",style:{"font-weight":"bold"}},"Error",-1)])]),_:1}),n(D,null,{default:c(()=>[...a[1]||(a[1]=[v("div",{class:"text-h6",style:{"font-weight":"normal"}},"There is no data available for this selection. Try changing the parameters.",-1)])]),_:1}),n(le,{align:"right"},{default:c(()=>[R(n(Z,{flat:"",label:"OK",color:"secondary",style:{"font-weight":"bold"}},null,512),[[se]])]),_:1})]),_:1})]),_:1})}const re=Q(oe,[["render",ne]]),ie={class:"buttons-container"},ue={class:"data-container"},he={__name:"ThresholdStandings",setup(e){const a=o(null),l=o(null),t=o(null),i=o(null),h=o(null),S=k("leaguePositions"),B=k("specialLeagues"),d=o([]);let g;const f=o(!1),_=o(!1),p=o(!1),M=async()=>{if(!a.value)return;f.value=!0,p.value=!1;const s=setTimeout(()=>{_.value=!0},2e4);B.includes(a.value)?g=o([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 210px"},{name:"ppm_mw",field:"ppm_mw",label:`PPM after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"points_mw",field:"points_mw",label:`Points after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"ppm",field:"ppm",label:"PPM",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]):g=o([{name:"season",field:"season",label:"Season",sortable:!0},{name:"position",field:"position",label:"#",sortable:!0},{name:"team",field:"team",label:"Team",sortable:!0,align:"left",style:"width: 210px"},{name:"points_mw",field:"points_mw",label:`Points after ${l.value} MP`,sortable:!0,style:"width: 70px"},{name:"points",field:"points",label:"Points",sortable:!0,style:"width: 70px; font-weight: bold"},{name:"matches_played",field:"matches_played",label:"MP",sortable:!0,style:"width: 70px"},{name:"wins",field:"wins",label:"W",sortable:!0,style:"width: 70px"},{name:"draws",field:"draws",label:"D",sortable:!0,style:"width: 70px"},{name:"losses",field:"losses",label:"L",sortable:!0,style:"width: 70px"},{name:"goals_for",field:"goals_for",label:"GF",sortable:!0,style:"width: 70px"},{name:"goals_against",field:"goals_against",label:"GA",sortable:!0,style:"width: 70px"},{name:"goal_difference",field:"goal_difference",label:"GD",sortable:!0,style:"width: 70px"}]);const r=await K.get("https://football-charts-backend.onrender.com/threshold-standings",{params:{league_name:a.value,matches_played:l.value,threshold:t.value}});clearTimeout(s),f.value=!1,_.value=!1,d.value=r.data,console.log(!d.value.length),d.value.length||(p.value=!0)};return m(a,()=>{l.value=null,t.value=null}),m(l,()=>{t.value=null}),m(a,s=>{i.value=2*(S[s]-1)}),m(l,s=>{s!=null&&(h.value=3*s),s>i.value?l.value=i.value:s!=null&&s<1&&(l.value=1)}),m(t,s=>{s>h.value?t.value=h.value:s!=null&&s<0&&(t.value=0)}),(s,r)=>(b(),W(X,null,[n(re,{modelValue:p.value,"onUpdate:modelValue":r[0]||(r[0]=u=>p.value=u)},null,8,["modelValue"]),v("div",ie,[n(G,{modelValue:a.value,"onUpdate:modelValue":r[1]||(r[1]=u=>a.value=u)},null,8,["modelValue"]),n(V,{modelValue:l.value,"onUpdate:modelValue":r[2]||(r[2]=u=>l.value=u),modelModifiers:{number:!0},disable:!a.value,label:"MP"},null,8,["modelValue","disable"]),n(V,{modelValue:t.value,"onUpdate:modelValue":r[3]||(r[3]=u=>t.value=u),modelModifiers:{number:!0},disable:!l.value,label:"Pts."},null,8,["modelValue","disable"]),n(N,{onClick:M})]),v("div",ue,[f.value?(b(),w(E,{key:0})):C("",!0),n(z,{class:j({visible:_.value})},null,8,["class"]),d.value.length&&!f.value?(b(),w(U,{key:1,rows:d.value,columns:H(g)},null,8,["rows","columns"])):C("",!0)])],64))}};export{he as default};
