import{h as _}from"./highcharts-vue.min-DrW9eCuL.js";import{_ as x,S as L,P as C}from"./SelectLeague-7_ncoknL.js";import{r as p,N as S,G as g,L as b,K as v,F as $,T as w,P}from"./index-C6mlnINT.js";import"./QBtn-1lZu7ACE.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./format-CSC_wmZ4.js";const V={class:"buttons-container"},k={class:"buttons-container",style:{"padding-bottom":"30px"}},z={__name:"PromotionFrequency",setup(T){const t=p(null),d=p({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),m=p(0);function y(){fetch(`data/${t.value.toLowerCase().replace(/\s+/g,"_")}.csv`).then(n=>n.text()).then(n=>{C.parse(n,{header:!0,complete:r=>{m.value++;const l=[];for(let e=0;e<25;e++){const o=String(e).padStart(2,"0"),u=String(e+1).padStart(2,"0");l.push(`${o}/${u}`)}const a={};for(let e=0;e<25;e++)if(e==0)t.value=="LaLiga"?(a.Villarreal=1,a["Las Palmas"]=1,a.Osasuna=1):t.value=="Premier League"?(a["Ipswich Town"]=1,a["Charlton Ath"]=1,a["Manchester City"]=1):t.value=="Serie A"?(a.Atalanta=1,a.Vicenza=1,a.Napoli=1):t.value=="Bundesliga"?(a.KÃ¶ln=1,a["Energie Cottbus"]=1,a.Bochum=1):t.value=="Ligue 1"&&(a.Lille=1,a.Guingamp=1,a.Toulouse=1);else{const o=l[e-1],u=l[e],h=[],f=[];r.data.forEach(s=>{s.Season==o?h.push(s.Team):s.Season==u&&f.push(s.Team)}),f.filter(s=>!h.includes(s)).map(s=>{a[s]=(a[s]||0)+1})}const i=Object.entries(a).sort((e,o)=>o[1]-e[1]).map(([e,o])=>({name:e,y:o})),c=i[0].y;i.forEach(e=>{e.name=`<div class="row no-wrap items-center" style="font-size: 11px;">${e.name}<img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${t.value}/${e.name}.png" style="width: 16px; margin-left: 6px;"></div>`,e.color=`hsl(120, ${(1-e.y/(c+1))*100}%, ${(1-e.y/(c+1))*100}%)`}),d.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"bar",height:30*i.length,width:800,marginRight:20},legend:{enabled:!1},xAxis:{type:"category",labels:{useHTML:!0}},yAxis:{max:c,title:"",labels:{enabled:!1}},plotOptions:{bar:{dataLabels:{enabled:!0,overflow:"allow",crop:!1,style:{fontFamily:"Inter"}}}},series:[{name:"Times promoted",data:i,pointWidth:20}],credits:{enabled:!1}}}})})}return(n,r)=>(g(),S(P,null,[b("div",V,[v(x,{modelValue:t.value,"onUpdate:modelValue":r[0]||(r[0]=l=>t.value=l)},null,8,["modelValue"]),v(L,{onClick:y})]),b("div",k,[(g(),$(w(_.Chart),{key:m.value,options:d.value},null,8,["options"]))])],64))}};export{z as default};
