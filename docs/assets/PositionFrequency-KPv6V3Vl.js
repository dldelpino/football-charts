import{h as V}from"./highcharts-vue.min-Bt_8MJ4W.js";import{_ as $,S as C,L as S,a as B,b as M}from"./ShowResults-DnWw1412.js";import{S as O}from"./SelectPosition-BToML1tR.js";import{u as s,w as v,N as F,G as f,L as h,K as c,F as _,S as x,R as T,T as N,O as P}from"./index-C275C3uD.js";import"./QBtn-Cm945ebs.js";import"./format-BfvkFYMi.js";const E={class:"buttons-container"},j={class:"data-container"},q={style:{width:"90%"}},A={__name:"PositionFrequency",setup(z){const a=s(null),e=s(null),o=s(null),g=s(0),b=s({title:{text:""},chart:{backgroundColor:"#eeeeee"},credits:{enabled:!1}}),r=s(!1),d=s(!1),k={LaLiga:"Spain","Premier League":"England","Serie A":"Italy",Bundesliga:"Germany","Ligue 1":"France"},w=async()=>{if(!a.value||!e.value)return;r.value=!0;const u=setTimeout(()=>{d.value=!0},1e4),l=(await M.get("https://football-charts-backend.onrender.com/position-frequency",{params:{league_name:a.value,position:e.value}})).data,L=Object.entries(l).sort((t,p)=>p[1]-t[1]).map(([t,p])=>({name:t,y:p}));let i;e.value==1?i="st":e.value==2?i="nd":e.value==3?i="rd":i="th";const m=Object.keys(l).length,y=[];for(let t=1;t<=m;t++)y.push(`hsl(120, ${Math.floor(t/(m+1)*100)}%, ${Math.floor(t/(m+1)*100)}%)`);clearTimeout(u),r.value=!1,d.value=!1,g.value++,b.value={title:{text:""},chart:{backgroundColor:"#eeeeee",type:"pie",height:500},colors:y,plotOptions:{pie:{dataLabels:{enabled:!0,useHTML:!0,style:{fontFamily:"Inter"},formatter:function(){return`<div class="row no-wrap items-center" style="font-size: 11px"><img src="https://raw.githubusercontent.com/dldelpino/football-charts/refs/heads/main/public/icons/teams/${k[a.value]}/${this.point.name}.png" style="width: 16px; margin-right: 6px">${this.point.name} (${this.point.y}) &#8203 &#8203 &#8203 &#8203 &#8203</div>`}}}},series:[{name:`Times finished ${e.value}${i}`,data:L}],credits:{enabled:!1}}};return v(a,()=>{e.value=null}),v(a,u=>{u=="Bundesliga"?o.value=18:o.value=20}),v(e,()=>{e.value>o.value?e.value=o.value:e.value!=null&&e.value<1&&(e.value=1)}),(u,n)=>(f(),F(P,null,[h("div",E,[c($,{modelValue:a.value,"onUpdate:modelValue":n[0]||(n[0]=l=>a.value=l)},null,8,["modelValue"]),c(O,{modelValue:e.value,"onUpdate:modelValue":n[1]||(n[1]=l=>e.value=l),modelModifiers:{number:!0},disable:!a.value,max:o.value},null,8,["modelValue","disable","max"]),c(C,{onClick:w})]),h("div",j,[r.value?(f(),_(B,{key:0})):x("",!0),c(S,{class:T({visible:d.value})},null,8,["class"]),h("div",q,[r.value?x("",!0):(f(),_(N(V.Chart),{key:g.value,options:b.value},null,8,["options"]))])])],64))}};export{A as default};
